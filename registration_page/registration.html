<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Registration</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="./reg_style.css">
  </head>
  <body>

    <center class="heading_form">
      <h1 class="display-6">Step 1</h1>
      <p>Congratulations! you have taken your first step towards your career.</p>
    </center>

    
    <div class="mail_form_90">
        <form id="form" name="myForm" method="POST" onsubmit="return validateForm()">
        <!-- name -->
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Name</label>
            <input type="name" class="form-control" name="Name" id="exampleFormControlInput1" placeholder="Name">
        </div>
        <!-- email -->
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Email address</label>
            <input type="email" class="form-control" name="Email" id="exampleFormControlInput2" placeholder="name@example.com">
        </div>
        <!-- mob no -->
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Mobile number</label>
            <input type="mob" class="form-control" name="Phone" id="exampleFormControlInput3" placeholder="12345567890">
        </div>
        <!-- Domain -->
        <label for="exampleFormControlInput1" class="form-label">Domain</label>
        <select class="form-select"  aria-label="Default select example" name="Domain">
            <option selected class="option_90" value="0">Internship</option>
            <option value="1">Frontend web development</option>
            <option value="2">Backend web development</option>
            <option value="3">Full stack web development</option>
            <option value="4">Software development</option>
            <option value="5">UI/UX design</option>
            <option value="6">Data Science</option>
            <option value="7">IOT</option>
            <option value="8">Digital Marketing</option>
            <option value="9">content Writing</option>
            <option value="10">Human Resource</option>
            <option value="11">Business development</option>
        </select>

        <br>
        <!-- College name -->
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">College Name</label>
            <input type="mob" class="form-control" id="exampleFormControlInput4" name="College" placeholder="College/University name">
        </div>
        <!-- MOJ -->
        <label for="exampleFormControlInput1" class="form-label">Month of joining</label>
        <div class="input-group">
            <select class="form-select" aria-label="Default select example" name="MOJ">
                <option selected class="option_90" value="0">MONTH OF JOINING</option>
                <option value="1">October</option>
                <option value="2">November</option>
                <option value="3">December</option>
            </select>
        </div>
        <!-- payment integration -->
         
        <div class="">
          <br>
          <!-- <form>
            <script src="https://checkout.razorpay.com/v1/payment-button.js" data-payment_button_id="pl_N9tox0DDhxFdKt" async> </script>
          </form> -->
                <p><a href="https://rzp.io/rzp/ejg8Ke6" target="_blank">Click here (Registration Fee Rs. 260/-) </a></p> 
                 <!-- <label for="exampleFormControlInput1" class="form-label">Month of joining</label> -->
               <input type="text" class="form-control" id="t_id" name="T_ID" placeholder="PAYMENT ID">
        </div>

        <br>

        <!-- submit -->
         <center>
        <div class="">
            <button type="submit" class="btn btn-primary" id="submit-button" onclick="submitForm()">Submit</button>
        </div>
      </center>

    </form>
    
</div>
<!-- <center>
  <div>
    <form><script src="https://checkout.razorpay.com/v1/payment-button.js" data-payment_button_id="pl_N9tox0DDhxFdKt" async> </script> </form>
   </div>
</center> -->


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  


    <!-- script part will come here. -->

  <script>
    document.getElementById("form").addEventListener("submit", function (e) {
      console.log("entered in script");
      e.preventDefault(); // Prevent the default form submission

      // Collect the form data
      var formData = new FormData(this);
      var keyValuePairs = [];
      for (var pair of formData.entries()) {
        keyValuePairs.push(pair[0] + "=" + pair[1]);
      }

      var formDataString = keyValuePairs.join("&");

      console.log(keyValuePairs);

      // Send a POST request to your Google Apps Script
      fetch(
        "https://script.google.com/macros/s/AKfycbzUhFC9j1-p99iAC9IPrQHRZNx9NF6zJRxHWzGVvhvn6_xdJOZbUJGG0x2TU9k2uX6f/exec",
        {
          redirect: "follow",
          method: "POST",
          body: formDataString,
          headers: {
            "Content-Type": "text/plain;charset=utf-8",
          },
        }
      )
        .then(function (response) {
          // Check if the request was successful
          if (response) {
            return response; // Assuming your script returns JSON response
          } else {
            throw new Error("Failed to submit the form.");
          }
        })
        .then(function (data) {
          // Display a success message

          setTimeout(function () {
            document.getElementById("message").textContent = "";
            document.getElementById("message").style.display = "none";
          }, 2600);
        })
        .catch(function (error) {
          // Handle errors, you can display an error message here
          console.error(error);
          document.getElementById("message").textContent =
            "An error occurred while submitting the form.";
          document.getElementById("message").style.display = "block";
        });
    });





    const alertPlaceholder = document.getElementById('liveAlertPlaceholder')
    const appendAlert = (message, type) => {
      const wrapper = document.createElement('div')
      wrapper.innerHTML = [
        `<div class="alert alert-${type} alert-dismissible" role="alert">`,
        `   <div>${message}</div>`,
        '   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',
        '</div>'
      ].join('')

      alertPlaceholder.append(wrapper)
    }

    const alertTrigger = document.getElementById('submit-button')
    if (alertTrigger) {
      alertTrigger.addEventListener('click', () => {
        appendAlert('Your message sent succesfully!', 'success')
      })
    }


    
    // validating form.
    function validateForm() {
      let x = document.forms["myForm"]["T_ID"].value;
      if (x == "") {
        alert("Transaction Id must be filled.");
        return false;
      }
}

document.getElementById('form').addEventListener('submit', function(event) {
    event.preventDefault(); // Prevent the form from submitting the traditional way

    // Get the age from the input
    const tid = parseInt(document.getElementById('t_id').value, 10);

    // Check the age condition and redirect accordingly
    if (tid != "") {
        window.location.href = 'succes.html'; // Redirect to adult page
    } else {
        window.location.href = 'underage-page.html'; // Redirect to underage page
    }
});




  </script>


    </body>
</html>


